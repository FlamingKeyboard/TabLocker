/*! For license information please see options.js.LICENSE.txt */
(()=>{var t={992:(t,e,r)=>{var n,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(t,e){if(!n[t]){n[t]={};for(var r=0;r<t.length;r++)n[t][t.charAt(r)]=r}return n[t][e]}var a={compressToBase64:function(t){if(null==t)return"";var r=a._compress(t,6,(function(t){return e.charAt(t)}));switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,(function(r){return o(e,t.charAt(r))}))},compressToUTF16:function(e){return null==e?"":a._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=a.compress(t),r=new Uint8Array(2*e.length),n=0,o=e.length;n<o;n++){var i=e.charCodeAt(n);r[2*n]=i>>>8,r[2*n+1]=i%256}return r},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var r=new Array(e.length/2),n=0,o=r.length;n<o;n++)r[n]=256*e[2*n]+e[2*n+1];var i=[];return r.forEach((function(e){i.push(t(e))})),a.decompress(i.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":a._compress(t,6,(function(t){return r.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,(function(e){return o(r,t.charAt(e))})))},compress:function(e){return a._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,r){if(null==t)return"";var n,o,a,i={},c={},u="",s="",l="",f=2,p=3,h=2,d=[],v=0,y=0;for(a=0;a<t.length;a+=1)if(u=t.charAt(a),Object.prototype.hasOwnProperty.call(i,u)||(i[u]=p++,c[u]=!0),s=l+u,Object.prototype.hasOwnProperty.call(i,s))l=s;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)v<<=1,y==e-1?(y=0,d.push(r(v)),v=0):y++;for(o=l.charCodeAt(0),n=0;n<8;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1}else{for(o=1,n=0;n<h;n++)v=v<<1|o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete c[l]}else for(o=i[l],n=0;n<h;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1;0==--f&&(f=Math.pow(2,h),h++),i[s]=p++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)v<<=1,y==e-1?(y=0,d.push(r(v)),v=0):y++;for(o=l.charCodeAt(0),n=0;n<8;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1}else{for(o=1,n=0;n<h;n++)v=v<<1|o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o=0;for(o=l.charCodeAt(0),n=0;n<16;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1}0==--f&&(f=Math.pow(2,h),h++),delete c[l]}else for(o=i[l],n=0;n<h;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1;0==--f&&(f=Math.pow(2,h),h++)}for(o=2,n=0;n<h;n++)v=v<<1|1&o,y==e-1?(y=0,d.push(r(v)),v=0):y++,o>>=1;for(;;){if(v<<=1,y==e-1){d.push(r(v));break}y++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,r,n){var o,a,i,c,u,s,l,f=[],p=4,h=4,d=3,v="",y=[],m={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)f[o]=o;for(i=0,u=Math.pow(2,2),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;switch(i){case 0:for(i=0,u=Math.pow(2,8),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;l=t(i);break;case 1:for(i=0,u=Math.pow(2,16),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;l=t(i);break;case 2:return""}for(f[3]=l,a=l,y.push(l);;){if(m.index>e)return"";for(i=0,u=Math.pow(2,d),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;switch(l=i){case 0:for(i=0,u=Math.pow(2,8),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;f[h++]=t(i),l=h-1,p--;break;case 1:for(i=0,u=Math.pow(2,16),s=1;s!=u;)c=m.val&m.position,m.position>>=1,0==m.position&&(m.position=r,m.val=n(m.index++)),i|=(c>0?1:0)*s,s<<=1;f[h++]=t(i),l=h-1,p--;break;case 2:return y.join("")}if(0==p&&(p=Math.pow(2,d),d++),f[l])v=f[l];else{if(l!==h)return null;v=a+a.charAt(0)}y.push(v),f[h++]=a+v.charAt(0),a=v,0==--p&&(p=Math.pow(2,d),d++)}}};return a}();void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t,e,n,o,a,i,c,u,s,l,f,p={},h=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,v=Array.isArray;function y(t,e){for(var r in e)t[r]=e[r];return t}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function b(e,r,n){var o,a,i,c={};for(i in r)"key"==i?o=r[i]:"ref"==i?a=r[i]:c[i]=r[i];if(arguments.length>2&&(c.children=arguments.length>3?t.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===c[i]&&(c[i]=e.defaultProps[i]);return g(e,c,o,a,null)}function g(t,r,o,a,i){var c={type:t,props:r,key:o,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++n:i,__i:-1,__u:0};return null==i&&null!=e.vnode&&e.vnode(c),c}function _(t){return t.children}function w(t,e){this.props=t,this.context=e}function x(t,e){if(null==e)return t.__?x(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?x(t):null}function k(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return k(t)}}function E(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!S.__r++||a!==e.debounceRendering)&&((a=e.debounceRendering)||i)(S)}function S(){for(var t,r,n,a,i,u,s,l=1;o.length;)o.length>l&&o.sort(c),t=o.shift(),l=o.length,t.__d&&(n=void 0,i=(a=(r=t).__v).__e,u=[],s=[],r.__P&&((n=y({},a)).__v=a.__v+1,e.vnode&&e.vnode(n),C(r.__P,n,a,r.__n,r.__P.namespaceURI,32&a.__u?[i]:null,u,null==i?x(a):i,!!(32&a.__u),s),n.__v=a.__v,n.__.__k[n.__i]=n,I(u,n,s),n.__e!=i&&k(n)));S.__r=0}function O(t,e,r,n,o,a,i,c,u,s,l){var f,d,v,y,m,b,g=n&&n.__k||h,_=e.length;for(u=L(r,e,g,u,_),f=0;f<_;f++)null!=(v=r.__k[f])&&(d=-1===v.__i?p:g[v.__i]||p,v.__i=f,b=C(t,v,d,o,a,i,c,u,s,l),y=v.__e,v.ref&&d.ref!=v.ref&&(d.ref&&D(d.ref,null,v),l.push(v.ref,v.__c||y,v)),null==m&&null!=y&&(m=y),4&v.__u||d.__k===v.__k?u=T(v,u,t):"function"==typeof v.type&&void 0!==b?u=b:y&&(u=y.nextSibling),v.__u&=-7);return r.__e=m,u}function L(t,e,r,n,o){var a,i,c,u,s,l=r.length,f=l,p=0;for(t.__k=new Array(o),a=0;a<o;a++)null!=(i=e[a])&&"boolean"!=typeof i&&"function"!=typeof i?(u=a+p,(i=t.__k[a]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?g(null,i,null,null,null):v(i)?g(_,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?g(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,c=null,-1!==(s=i.__i=P(i,r,u,f))&&(f--,(c=r[s])&&(c.__u|=2)),null==c||null===c.__v?(-1==s&&(o>l?p--:o<l&&p++),"function"!=typeof i.type&&(i.__u|=4)):s!=u&&(s==u-1?p--:s==u+1?p++:(s>u?p--:p++,i.__u|=4))):t.__k[a]=null;if(f)for(a=0;a<l;a++)null!=(c=r[a])&&!(2&c.__u)&&(c.__e==n&&(n=x(c)),U(c,c));return n}function T(t,e,r){var n,o;if("function"==typeof t.type){for(n=t.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=t,e=T(n[o],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=x(t)),r.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function P(t,e,r,n){var o,a,i=t.key,c=t.type,u=e[r];if(null===u&&null==t.key||u&&i==u.key&&c===u.type&&!(2&u.__u))return r;if(n>(null==u||2&u.__u?0:1))for(o=r-1,a=r+1;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&!(2&u.__u)&&i==u.key&&c===u.type)return o;o--}if(a<e.length){if((u=e[a])&&!(2&u.__u)&&i==u.key&&c===u.type)return a;a++}}return-1}function N(t,e,r){"-"==e[0]?t.setProperty(e,null==r?"":r):t[e]=null==r?"":"number"!=typeof r||d.test(e)?r:r+"px"}function j(t,e,r,n,o){var a;t:if("style"==e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||N(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||N(t.style,e,r[e])}else if("o"==e[0]&&"n"==e[1])a=e!=(e=e.replace(u,"$1")),e=e.toLowerCase()in t||"onFocusOut"==e||"onFocusIn"==e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=r,r?n?r.t=n.t:(r.t=s,t.addEventListener(e,a?f:l,a)):t.removeEventListener(e,a?f:l,a);else{if("http://www.w3.org/2000/svg"==o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==r?"":r;break t}catch(t){}"function"==typeof r||(null==r||!1===r&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==r?"":r))}}function A(t){return function(r){if(this.l){var n=this.l[r.type+t];if(null==r.u)r.u=s++;else if(r.u<n.t)return;return n(e.event?e.event(r):r)}}}function C(t,r,n,o,a,i,c,u,s,l){var f,p,h,d,b,g,x,k,E,S,L,T,P,N,j,A,C,I=r.type;if(void 0!==r.constructor)return null;128&n.__u&&(s=!!(32&n.__u),i=[u=r.__e=n.__e]),(f=e.__b)&&f(r);t:if("function"==typeof I)try{if(k=r.props,E="prototype"in I&&I.prototype.render,S=(f=I.contextType)&&o[f.__c],L=f?S?S.props.value:f.__:o,n.__c?x=(p=r.__c=n.__c).__=p.__E:(E?r.__c=p=new I(k,L):(r.__c=p=new w(k,L),p.constructor=I,p.render=R),S&&S.sub(p),p.props=k,p.state||(p.state={}),p.context=L,p.__n=o,h=p.__d=!0,p.__h=[],p._sb=[]),E&&null==p.__s&&(p.__s=p.state),E&&null!=I.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=y({},p.__s)),y(p.__s,I.getDerivedStateFromProps(k,p.__s))),d=p.props,b=p.state,p.__v=r,h)E&&null==I.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),E&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(E&&null==I.getDerivedStateFromProps&&k!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,L),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,L)||r.__v==n.__v)){for(r.__v!=n.__v&&(p.props=k,p.state=p.__s,p.__d=!1),r.__e=n.__e,r.__k=n.__k,r.__k.some((function(t){t&&(t.__=r)})),T=0;T<p._sb.length;T++)p.__h.push(p._sb[T]);p._sb=[],p.__h.length&&c.push(p);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,L),E&&null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(d,b,g)}))}if(p.context=L,p.props=k,p.__P=t,p.__e=!1,P=e.__r,N=0,E){for(p.state=p.__s,p.__d=!1,P&&P(r),f=p.render(p.props,p.state,p.context),j=0;j<p._sb.length;j++)p.__h.push(p._sb[j]);p._sb=[]}else do{p.__d=!1,P&&P(r),f=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++N<25);p.state=p.__s,null!=p.getChildContext&&(o=y(y({},o),p.getChildContext())),E&&!h&&null!=p.getSnapshotBeforeUpdate&&(g=p.getSnapshotBeforeUpdate(d,b)),A=f,null!=f&&f.type===_&&null==f.key&&(A=F(f.props.children)),u=O(t,v(A)?A:[A],r,n,o,a,i,c,u,s,l),p.base=r.__e,r.__u&=-161,p.__h.length&&c.push(p),x&&(p.__E=p.__=null)}catch(t){if(r.__v=null,s||null!=i)if(t.then){for(r.__u|=s?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,r.__e=u}else for(C=i.length;C--;)m(i[C]);else r.__e=n.__e,r.__k=n.__k;e.__e(t,r,n)}else null==i&&r.__v==n.__v?(r.__k=n.__k,r.__e=n.__e):u=r.__e=G(n.__e,r,n,o,a,i,c,s,l);return(f=e.diffed)&&f(r),128&r.__u?void 0:u}function I(t,r,n){for(var o=0;o<n.length;o++)D(n[o],n[++o],n[++o]);e.__c&&e.__c(r,t),t.some((function(r){try{t=r.__h,r.__h=[],t.some((function(t){t.call(r)}))}catch(t){e.__e(t,r.__v)}}))}function F(t){return"object"!=typeof t||null==t?t:v(t)?t.map(F):y({},t)}function G(r,n,o,a,i,c,u,s,l){var f,h,d,y,b,g,_,w=o.props,k=n.props,E=n.type;if("svg"==E?i="http://www.w3.org/2000/svg":"math"==E?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=c)for(f=0;f<c.length;f++)if((b=c[f])&&"setAttribute"in b==!!E&&(E?b.localName==E:3==b.nodeType)){r=b,c[f]=null;break}if(null==r){if(null==E)return document.createTextNode(k);r=document.createElementNS(i,E,k.is&&k),s&&(e.__m&&e.__m(n,c),s=!1),c=null}if(null===E)w===k||s&&r.data===k||(r.data=k);else{if(c=c&&t.call(r.childNodes),w=o.props||p,!s&&null!=c)for(w={},f=0;f<r.attributes.length;f++)w[(b=r.attributes[f]).name]=b.value;for(f in w)if(b=w[f],"children"==f);else if("dangerouslySetInnerHTML"==f)d=b;else if(!(f in k)){if("value"==f&&"defaultValue"in k||"checked"==f&&"defaultChecked"in k)continue;j(r,f,null,b,i)}for(f in k)b=k[f],"children"==f?y=b:"dangerouslySetInnerHTML"==f?h=b:"value"==f?g=b:"checked"==f?_=b:s&&"function"!=typeof b||w[f]===b||j(r,f,b,w[f],i);if(h)s||d&&(h.__html===d.__html||h.__html===r.innerHTML)||(r.innerHTML=h.__html),n.__k=[];else if(d&&(r.innerHTML=""),O("template"===n.type?r.content:r,v(y)?y:[y],n,o,a,"foreignObject"==E?"http://www.w3.org/1999/xhtml":i,c,u,c?c[0]:o.__k&&x(o,0),s,l),null!=c)for(f=c.length;f--;)m(c[f]);s||(f="value","progress"==E&&null==g?r.removeAttribute("value"):void 0!==g&&(g!==r[f]||"progress"==E&&!g||"option"==E&&g!==w[f])&&j(r,f,g,w[f],i),f="checked",void 0!==_&&_!==r[f]&&j(r,f,_,w[f],i))}return r}function D(t,r,n){try{if("function"==typeof t){var o="function"==typeof t.__u;o&&t.__u(),o&&null==r||(t.__u=t(r))}else t.current=r}catch(t){e.__e(t,n)}}function U(t,r,n){var o,a;if(e.unmount&&e.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||D(o,null,r)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){e.__e(t,r)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&U(o[a],r,n||"function"!=typeof t.type);n||m(t.__e),t.__c=t.__=t.__e=void 0}function R(t,e,r){return this.constructor(t,r)}t=h.slice,e={__e:function(t,e,r,n){for(var o,a,i;e=e.__;)if((o=e.__c)&&!o.__)try{if((a=o.constructor)&&null!=a.getDerivedStateFromError&&(o.setState(a.getDerivedStateFromError(t)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,n||{}),i=o.__d),i)return o.__E=o}catch(e){t=e}throw t}},n=0,w.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=y({},this.state),"function"==typeof t&&(t=t(y({},r),this.props)),t&&y(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),E(this))},w.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),E(this))},w.prototype.render=_,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(t,e){return t.__v.__b-e.__v.__b},S.__r=0,u=/(PointerCapture)$|Capture$/i,s=0,l=A(!1),f=A(!0);var B,M,H,W,K=0,q=[],J=e,Y=J.__b,z=J.__r,$=J.diffed,V=J.__c,Q=J.unmount,X=J.__;function Z(t,e){J.__h&&J.__h(M,t,K||e),K=0;var r=M.__H||(M.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function tt(t){return K=1,function(t,e){var r=Z(B++,2);if(r.t=t,!r.__c&&(r.__=[ut(void 0,e),function(t){var e=r.__N?r.__N[0]:r.__[0],n=r.t(e,t);e!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=M,!M.__f)){var n=function(t,e,n){if(!r.__c.__H)return!0;var a=r.__c.__H.__.filter((function(t){return!!t.__c}));if(a.every((function(t){return!t.__N})))return!o||o.call(this,t,e,n);var i=r.__c.props!==t;return a.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(i=!0)}})),o&&o.call(this,t,e,n)||i};M.__f=!0;var o=M.shouldComponentUpdate,a=M.componentWillUpdate;M.componentWillUpdate=function(t,e,r){if(this.__e){var i=o;o=void 0,n(t,e,r),o=i}a&&a.call(this,t,e,r)},M.shouldComponentUpdate=n}return r.__N||r.__}(ut,t)}function et(t,e){var r=Z(B++,3);!J.__s&&ct(r.__H,e)&&(r.__=t,r.u=e,M.__H.__h.push(r))}function rt(){for(var t;t=q.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(at),t.__H.__h.forEach(it),t.__H.__h=[]}catch(e){t.__H.__h=[],J.__e(e,t.__v)}}J.__b=function(t){M=null,Y&&Y(t)},J.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),X&&X(t,e)},J.__r=function(t){z&&z(t),B=0;var e=(M=t.__c).__H;e&&(H===M?(e.__h=[],M.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0}))):(e.__h.forEach(at),e.__h.forEach(it),e.__h=[],B=0)),H=M},J.diffed=function(t){$&&$(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==q.push(e)&&W===J.requestAnimationFrame||((W=J.requestAnimationFrame)||ot)(rt)),e.__H.__.forEach((function(t){t.u&&(t.__H=t.u),t.u=void 0}))),H=M=null},J.__c=function(t,e){e.some((function(t){try{t.__h.forEach(at),t.__h=t.__h.filter((function(t){return!t.__||it(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],J.__e(r,t.__v)}})),V&&V(t,e)},J.unmount=function(t){Q&&Q(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{at(t)}catch(t){e=t}})),r.__H=void 0,e&&J.__e(e,r.__v))};var nt="function"==typeof requestAnimationFrame;function ot(t){var e,r=function(){clearTimeout(n),nt&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);nt&&(e=requestAnimationFrame(r))}function at(t){var e=M,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),M=e}function it(t){var e=M;t.__c=t.__(),M=e}function ct(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function ut(t,e){return"function"==typeof e?e(t):e}var st=r(992),lt=r.n(st);function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}function ht(t){var e=function(t){if("object"!=ft(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:e+""}var dt=function(){return function(t,e){return e&&pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"compress",value:function(t){var e="object"===ft(t)?JSON.stringify(t):String(t);return lt().compressToUTF16(e)}},{key:"decompress",value:function(t){var e=lt().decompressFromUTF16(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return e}}},{key:"compressToBase64",value:function(t){var e="object"===ft(t)?JSON.stringify(t):String(t);return lt().compressToBase64(e)}},{key:"decompressFromBase64",value:function(t){var e=lt().decompressFromBase64(t);if(!e)return null;try{return JSON.parse(e)}catch(t){return e}}}])}();const vt=dt;function yt(t){return function(t){if(Array.isArray(t))return mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function gt(){gt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function m(){}function b(){}function g(){}var _={};s(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,i)&&(_=x);var k=g.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==bt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(bt(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _t(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){_t(a,n,o,i,c,"next",t)}function c(t){_t(a,n,o,i,c,"throw",t)}i(void 0)}))}}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function kt(t){var e=function(t){if("object"!=bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:e+""}var Et=function(){return function(t,e){return e&&xt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.password=e,this.algorithm={name:"AES-GCM",length:256},this.ivLength=12,this.saltLength=16,this.iterations=1e5,this.cryptoObj=globalThis.crypto}),[{key:"setPassword",value:function(t){this.password=t}},{key:"deriveKey",value:(a=wt(gt().mark((function t(e,r){var n,o;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new TextEncoder,t.next=3,this.cryptoObj.subtle.importKey("raw",n.encode(e),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 3:return o=t.sent,t.abrupt("return",this.cryptoObj.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:this.iterations,hash:"SHA-256"},o,this.algorithm,!1,["encrypt","decrypt"]));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"generateKey",value:(o=wt(gt().mark((function t(){return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.cryptoObj.subtle.generateKey(this.algorithm,!0,["encrypt","decrypt"]));case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"exportKey",value:(n=wt(gt().mark((function t(e){return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.cryptoObj.subtle.exportKey("raw",e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"importKey",value:(r=wt(gt().mark((function t(e){return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.cryptoObj.subtle.importKey("raw",e,this.algorithm,!1,["encrypt","decrypt"]));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"encrypt",value:(e=wt(gt().mark((function t(e){var r,n,o,a,i,c,u,s,l,f=arguments;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(f.length>1&&void 0!==f[1]?f[1]:null)||this.password){t.next=4;break}throw new Error("No password set for encryption");case 4:return n=this.cryptoObj.getRandomValues(new Uint8Array(this.saltLength)),o=this.cryptoObj.getRandomValues(new Uint8Array(this.ivLength)),t.next=8,this.deriveKey(r,n);case 8:return a=t.sent,i=new TextEncoder,c="object"===bt(e)?JSON.stringify(e):String(e),u=i.encode(c),t.next=14,this.cryptoObj.subtle.encrypt({name:"AES-GCM",iv:o},a,u);case 14:return s=t.sent,(l=new Uint8Array(n.length+o.length+s.byteLength)).set(n,0),l.set(o,n.length),l.set(new Uint8Array(s),n.length+o.length),t.abrupt("return",btoa(String.fromCharCode.apply(String,yt(l))));case 20:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"decrypt",value:(t=wt(gt().mark((function t(e){var r,n,o,a,i,c,u,s,l,f=arguments;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(f.length>1&&void 0!==f[1]?f[1]:null)||this.password){t.next=4;break}throw new Error("No password set for decryption");case 4:if(t.prev=4,e&&"string"==typeof e){t.next=7;break}throw new Error("Invalid encrypted data format");case 7:t.prev=7,n=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})),t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(7),console.error("Error decoding Base64:",t.t0),new Error("Invalid Base64 data format");case 15:if(!(n.length<=this.saltLength+this.ivLength)){t.next=17;break}throw new Error("Encrypted data is too short");case 17:return o=n.slice(0,this.saltLength),a=n.slice(this.saltLength,this.saltLength+this.ivLength),i=n.slice(this.saltLength+this.ivLength),t.next=22,this.deriveKey(r,o);case 22:return c=t.sent,t.prev=23,t.next=26,this.cryptoObj.subtle.decrypt({name:"AES-GCM",iv:a},c,i);case 26:return u=t.sent,s=new TextDecoder,l=s.decode(u),t.prev=29,t.abrupt("return",JSON.parse(l));case 33:return t.prev=33,t.t1=t.catch(29),t.abrupt("return",l);case 36:t.next=42;break;case 38:throw t.prev=38,t.t2=t.catch(23),console.error("WebCrypto decryption failed:",t.t2),new Error("Decryption failed: Incorrect password or corrupted data");case 42:t.next=48;break;case 44:throw t.prev=44,t.t3=t.catch(4),console.error("Decryption error:",t.t3),t.t3;case 48:case"end":return t.stop()}}),t,this,[[4,44],[7,11],[23,38],[29,33]])}))),function(e){return t.apply(this,arguments)})}]);var t,e,r,n,o,a}();const St=Et;function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Lt(t){return function(t){if(Array.isArray(t))return Nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Pt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Pt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Pt(t,e){if(t){if("string"==typeof t)return Nt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(t,e):void 0}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(r),!0).forEach((function(e){Ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ct(t,e,r){return(e=Ut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(){It=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function m(){}function b(){}function g(){}var _={};s(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,i)&&(_=x);var k=g.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ot(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ot(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Ft(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Ft(a,n,o,i,c,"next",t)}function c(t){Ft(a,n,o,i,c,"throw",t)}i(void 0)}))}}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}var Rt=function(){return function(t,e){return e&&Dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dbName="TabLockerDB",this.dbVersion=1,this.db=null,this.isReady=!1,this.compressionService=new vt,this.encryptionService=new St(e),this.initializeDB()}),[{key:"setPassword",value:function(t){this.encryptionService.setPassword(t)}},{key:"initializeDB",value:(f=Gt(It().mark((function t(){var e=this;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=indexedDB.open(e.dbName,e.dbVersion);n.onupgradeneeded=function(t){var e=t.target.result;if(!e.objectStoreNames.contains("tabGroups")){var r=e.createObjectStore("tabGroups",{keyPath:"id"});r.createIndex("created","created",{unique:!1}),r.createIndex("name","name",{unique:!1})}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"key"})},n.onsuccess=function(r){e.db=r.target.result,e.isReady=!0,t(e.db)},n.onerror=function(t){console.error("Error opening IndexedDB:",t.target.error),r(t.target.error)}})));case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"ensureDBReady",value:(l=Gt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isReady||!this.db){t.next=2;break}return t.abrupt("return",this.db);case 2:return t.abrupt("return",this.initializeDB());case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"transaction",value:(s=Gt(It().mark((function t(e,r,n){var o=this;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureDBReady();case 2:return t.abrupt("return",new Promise((function(t,a){var i=o.db.transaction(e,r),c=i.objectStore(e);i.oncomplete=function(){return t()},i.onerror=function(t){return a(t.target.error)};var u=n(c);u&&(u.onsuccess=function(e){return t(e.target.result)},u.onerror=function(t){return a(t.target.error)})})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return s.apply(this,arguments)})},{key:"saveTabGroup",value:(u=Gt(It().mark((function t(e){var r,n,o,a;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.id||(e.id=crypto.randomUUID()),e.created||(e.created=Date.now()),e.name||(e.name="Tabs from ".concat(new Date(e.created).toLocaleString())),(r=JSON.parse(JSON.stringify(e))).tabs&&Array.isArray(r.tabs)){t.next=8;break}throw console.error("No tabs array found in tab group:",r),new Error("No tabs to save");case 8:if(n=JSON.stringify(r.tabs),o=this.compressionService.compress(n),this.encryptionService.password){t.next=19;break}return t.next=13,chrome.storage.local.get("password");case 13:if(!(a=t.sent).password){t.next=18;break}this.setPassword(a.password),t.next=19;break;case 18:throw new Error("No password set for encryption");case 19:return t.next=21,this.encryptionService.encrypt(o);case 21:return r.encryptedTabs=t.sent,delete r.tabs,t.next=25,this.transaction("tabGroups","readwrite",(function(t){return t.put(r)}));case 25:return console.log("Successfully saved tab group with ID: ".concat(r.id),r),t.abrupt("return",r.id);case 29:throw t.prev=29,t.t0=t.catch(0),console.error("Error saving tab group:",t.t0),new Error("Failed to save tabs: ".concat(t.t0.message));case 33:case"end":return t.stop()}}),t,this,[[0,29]])}))),function(t){return u.apply(this,arguments)})},{key:"getTabGroup",value:(c=Gt(It().mark((function t(e){var r,n,o,a;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transaction("tabGroups","readonly",(function(t){return t.get(e)}));case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:if(this.encryptionService.password){t.next=15;break}return t.next=9,chrome.storage.local.get("password");case 9:if(!(n=t.sent).password){t.next=14;break}this.setPassword(n.password),t.next=15;break;case 14:throw new Error("No password set for decryption");case 15:if(!r.encryptedTabs){t.next=46;break}return t.prev=16,t.next=19,this.encryptionService.decrypt(r.encryptedTabs);case 19:if(o=t.sent){t.next=22;break}throw new Error("Failed to decrypt tab data");case 22:if(a=this.compressionService.decompress(o)){t.next=25;break}throw new Error("Failed to decompress tab data");case 25:if("string"!=typeof a){t.next=36;break}t.prev=26,r.tabs=JSON.parse(a),t.next=34;break;case 30:throw t.prev=30,t.t0=t.catch(26),console.error("Error parsing decompressed tabs:",t.t0),new Error("Invalid tab data format");case 34:t.next=37;break;case 36:r.tabs=a;case 37:return t.abrupt("return",r);case 40:throw t.prev=40,t.t1=t.catch(16),console.error("Error decrypting tab group:",t.t1),new Error("Unable to decrypt tab group: ".concat(t.t1.message));case 44:t.next=47;break;case 46:throw new Error("No encrypted tab data found");case 47:t.next=53;break;case 49:throw t.prev=49,t.t2=t.catch(0),console.error("Error retrieving tab group:",t.t2),new Error("Failed to retrieve tab group: ".concat(t.t2.message));case 53:case"end":return t.stop()}}),t,this,[[0,49],[16,40],[26,30]])}))),function(t){return c.apply(this,arguments)})},{key:"getAllTabGroups",value:(i=Gt(It().mark((function t(){var e=this;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Gt(It().mark((function t(r,n){var o,a,i,c;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ensureDBReady();case 2:o=e.db.transaction("tabGroups","readonly"),a=o.objectStore("tabGroups"),i=a.index("created").openCursor(null,"prev"),c=[],i.onsuccess=function(t){var e=t.target.result;if(e){var n=At({},e.value);delete n.encryptedTabs,c.push(n),e.continue()}else r(c)},i.onerror=function(t){n(t.target.error)};case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"deleteTabGroup",value:(a=Gt(It().mark((function t(e){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.transaction("tabGroups","readwrite",(function(t){return t.delete(e)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"updateTabGroup",value:(o=Gt(It().mark((function t(e,r){var n;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTabGroup(e);case 2:if(n=t.sent){t.next=5;break}throw new Error("Tab group not found");case 5:return Object.assign(n,r),t.abrupt("return",this.saveTabGroup(n));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"searchTabGroups",value:(n=Gt(It().mark((function t(e){var r,n,o,a,i,c,u,s,l,f,p,h,d,v;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&""!==e.trim()){t.next=2;break}return t.abrupt("return",this.getAllTabGroups());case 2:return t.next=4,this.getAllTabGroups();case 4:r=t.sent,n=e.toLowerCase(),o=r.filter((function(t){return t.name.toLowerCase().includes(n)})),a=r.filter((function(t){return!o.some((function(e){return e.id===t.id}))})).map((function(t){return t.id})),i=[],c=Tt(a),t.prev=10,c.s();case 12:if((u=c.n()).done){t.next=29;break}return s=u.value,t.prev=14,t.next=17,this.getTabGroup(s);case 17:if((l=t.sent)&&l.tabs){t.next=20;break}return t.abrupt("continue",27);case 20:l.tabs.some((function(t){return t.title&&t.title.toLowerCase().includes(n)||t.url&&t.url.toLowerCase().includes(n)}))&&(delete(f=At({},l)).tabs,delete f.encryptedTabs,i.push(f)),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(14),console.error("Error searching tab group:",t.t0);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:p=Lt(o),h=It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=v[d],p.some((function(t){return t.id===e.id}))||p.push(e);case 2:case"end":return t.stop()}}),t)})),d=0,v=i;case 40:if(!(d<v.length)){t.next=45;break}return t.delegateYield(h(),"t2",42);case 42:d++,t.next=40;break;case 45:return t.abrupt("return",p);case 46:case"end":return t.stop()}}),t,this,[[10,31,34,37],[14,24]])}))),function(t){return n.apply(this,arguments)})},{key:"saveSetting",value:(r=Gt(It().mark((function t(e,r){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.transaction("settings","readwrite",(function(t){return t.put({key:e,value:r})})));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"getSetting",value:(e=Gt(It().mark((function t(e){var r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.transaction("settings","readonly",(function(t){return t.get(e)}));case 2:return r=t.sent,t.abrupt("return",r?r.value:null);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"clearAllData",value:(t=Gt(It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureDBReady();case 2:return(e=this.db.transaction(["tabGroups","settings"],"readwrite")).objectStore("tabGroups").clear(),e.objectStore("settings").clear(),t.abrupt("return",new Promise((function(t,r){e.oncomplete=function(){return t()},e.onerror=function(t){return r(t.target.error)}})));case 6:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n,o,a,i,c,u,s,l,f}();const Bt=Rt;function Mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Wt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(t,e):void 0}}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function qt(){qt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function m(){}function b(){}function g(){}var _={};s(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,i)&&(_=x);var k=g.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Kt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Kt(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Jt(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Yt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Jt(a,n,o,i,c,"next",t)}function c(t){Jt(a,n,o,i,c,"throw",t)}i(void 0)}))}}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$t(n.key),n)}}function $t(t){var e=function(t){if("object"!=Kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kt(e)?e:e+""}var Vt=function(){return function(t,e){return e&&zt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.compressionService=new vt,this.encryptionService=new St(e),e||this.initializeDefaultPassword()}),[{key:"initializeDefaultPassword",value:(o=Yt(qt().mark((function t(){var e;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,chrome.storage.local.get("password");case 3:(e=t.sent).password&&this.setPassword(e.password),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error initializing default password:",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return o.apply(this,arguments)})},{key:"setPassword",value:function(t){this.encryptionService.setPassword(t)}},{key:"exportAsOneTabFormat",value:function(t){return t&&t.length?t.map((function(t){return"".concat(t.url," | ").concat(t.title||"")})).join("\n"):""}},{key:"importFromOneTabFormat",value:function(t){return t?t.split(/\n\s*\n/).filter((function(t){return""!==t.trim()})).map((function(t){return t.split("\n").filter((function(t){return""!==t.trim()})).map((function(t){var e=t.split("|"),r=e[0].trim();return{url:r,title:e.length>1?e.slice(1).join("|").trim():r}}))})):[]}},{key:"exportEncrypted",value:(n=Yt(qt().mark((function t(e){var r,n,o,a,i,c=arguments;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,t.prev=1,r||this.encryptionService.password){t.next=11;break}return t.next=5,chrome.storage.local.get("password");case 5:if(!(n=t.sent).password){t.next=10;break}this.setPassword(n.password),t.next=11;break;case 10:throw new Error("No password set for encryption");case 11:return o=JSON.parse(JSON.stringify(e)),a=this.compressionService.compressToBase64(o),t.next=15,this.encryptionService.encrypt(a,r);case 15:return i=t.sent,t.abrupt("return","TABLOCKER:".concat(i));case 19:throw t.prev=19,t.t0=t.catch(1),console.error("Export encryption error:",t.t0),new Error("Export error: "+t.t0.message);case 23:case"end":return t.stop()}}),t,this,[[1,19]])}))),function(t){return n.apply(this,arguments)})},{key:"importEncrypted",value:(r=Yt(qt().mark((function t(e){var r,n,o,a,i,c=arguments;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,t.prev=1,e&&"string"==typeof e){t.next=4;break}throw new Error("No data to import or invalid format");case 4:if(e.startsWith("TABLOCKER:")){t.next=6;break}throw new Error("Invalid TabLocker export format");case 6:if(r||this.encryptionService.password){t.next=15;break}return t.next=9,chrome.storage.local.get("password");case 9:if(!(n=t.sent).password){t.next=14;break}this.setPassword(n.password),t.next=15;break;case 14:throw new Error("No password set for decryption");case 15:return o=e.substring(10),t.prev=16,t.next=19,this.encryptionService.decrypt(o,r);case 19:a=t.sent,t.next=26;break;case 22:throw t.prev=22,t.t0=t.catch(16),console.error("Decryption failed during import:",t.t0),new Error("Unable to decrypt tab group: ".concat(t.t0.message));case 26:if(a){t.next=28;break}throw new Error("Decryption returned empty data");case 28:t.prev=28,i=this.compressionService.decompressFromBase64(a),t.next=36;break;case 32:throw t.prev=32,t.t1=t.catch(28),console.error("Decompression failed during import:",t.t1),new Error("Failed to decompress import data: ".concat(t.t1.message));case 36:if(i){t.next=38;break}throw new Error("Failed to decompress import data");case 38:return"object"!==Kt(i)||Array.isArray(i)||i.tabs&&Array.isArray(i.tabs)||console.warn("Import data missing tabs array:",i),t.abrupt("return",i);case 42:throw t.prev=42,t.t2=t.catch(1),console.error("Import decryption error:",t.t2),new Error("Error processing import: ".concat(t.t2.message));case 46:case"end":return t.stop()}}),t,this,[[1,42],[16,22],[28,32]])}))),function(t){return r.apply(this,arguments)})},{key:"isOneTabFormat",value:function(t){if(!t)return!1;var e=t.split(/\n\s*\n/).filter((function(t){return""!==t.trim()}));if(0===e.length)return!1;var r,n=0,o=0,a=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ht(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(e);try{for(a.s();!(r=a.n()).done;){var i=r.value.split("\n").filter((function(t){return""!==t.trim()}));n+=i.length,o+=i.filter((function(t){var e=t.trim();return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("edge://")})).length}}catch(t){a.e(t)}finally{a.f()}return n>0&&o/n>=.8}},{key:"isTabLockerFormat",value:function(t){return t&&t.startsWith("TABLOCKER:")}},{key:"autoImport",value:(e=Yt(qt().mark((function t(e){var r,n,o,a,i,c,u,s,l=arguments;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:null,e){t.next=3;break}throw new Error("No import data provided");case 3:if(!this.isTabLockerFormat(e)){t.next=8;break}return t.next=6,this.importEncrypted(e,r);case 6:return t.t0=t.sent,t.abrupt("return",{type:"tablocker",data:t.t0});case 8:if(1!==(n=e.trim().split("\n")).length){t.next=14;break}if((o=n[0].trim()).includes(" | ")?(c=o.split(" | ").map((function(t){return t.trim()})),u=Mt(c,2),a=u[0],i=u[1]):(a=o,i=o),!(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("edge://"))){t.next=14;break}return t.abrupt("return",{type:"onetab",data:{groups:[{id:Date.now().toString(),name:"Imported URL",created:Date.now(),tabs:[{url:a,title:i}]}]}});case 14:if(!this.isOneTabFormat(e)){t.next=17;break}return s=this.importFromOneTabFormat(e),t.abrupt("return",{type:"onetab",data:{groups:s.map((function(t,e){return{id:(Date.now()+e).toString(),name:"Imported Group ".concat(e+1),created:Date.now(),tabs:t}}))}});case 17:throw new Error("Unsupported import format");case 18:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"downloadAsFile",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain";try{var n=new Blob([t],{type:r}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((function(){return URL.revokeObjectURL(o)}),100)}catch(t){throw console.error("Error creating download:",t),new Error("Cannot download file in this context")}}},{key:"copyToClipboard",value:(t=Yt(qt().mark((function t(e){var r,n;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),console.error("Error copying to clipboard:",t.t0),t.prev=9,(r=document.createElement("textarea")).value=e,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select(),n=document.execCommand("copy"),document.body.removeChild(r),t.abrupt("return",n);case 23:return t.prev=23,t.t1=t.catch(9),console.error("Fallback clipboard copy failed:",t.t1),t.abrupt("return",!1);case 27:case"end":return t.stop()}}),t,null,[[0,6],[9,23]])}))),function(e){return t.apply(this,arguments)})}]);var t,e,r,n,o}();const Qt=Vt;function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(r),!0).forEach((function(e){ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ee(t,e,r){return(e=ie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function re(){re=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function m(){}function b(){}function g(){}var _={};s(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,i)&&(_=x);var k=g.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Xt(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function ne(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ne(a,n,o,i,c,"next",t)}function c(t){ne(a,n,o,i,c,"throw",t)}i(void 0)}))}}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ie(n.key),n)}}function ie(t){var e=function(t){if("object"!=Xt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xt(e)?e:e+""}var ce=function(){return function(t,e){return e&&ae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"getCurrentWindowTabs",value:(i=oe(re().mark((function t(){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.tabs.query({currentWindow:!0},(function(e){var r=e.filter((function(t){return!(t.url.startsWith("chrome-extension://")||t.url.startsWith("moz-extension://")||t.url.startsWith("edge-extension://")||t.url.startsWith("opera-extension://"))})).map((function(t){return{id:t.id,url:t.url,title:t.title,favIconUrl:t.favIconUrl||null,pinned:t.pinned||!1,groupId:void 0!==t.groupId?t.groupId:-1}}));t(r)}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"getAllWindowsTabs",value:(a=oe(re().mark((function t(){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.tabs.query({},(function(e){var r=e.reduce((function(t,e){return e.url.startsWith("chrome-extension://")||e.url.startsWith("moz-extension://")||e.url.startsWith("edge-extension://")||e.url.startsWith("opera-extension://")||(t[e.windowId]||(t[e.windowId]=[]),t[e.windowId].push({id:e.id,url:e.url,title:e.title,favIconUrl:e.favIconUrl||null,pinned:e.pinned||!1,groupId:void 0!==e.groupId?e.groupId:-1})),t}),{});t(Object.values(r))}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"getTabGroups",value:(o=oe(re().mark((function t(){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(chrome.tabGroups){t.next=2;break}return t.abrupt("return",{});case 2:return t.abrupt("return",new Promise((function(t){chrome.tabGroups.query({},(function(e){var r=e.reduce((function(t,e){return t[e.id]={name:e.title||"",color:e.color||"grey"},t}),{});t(r)}))})));case 3:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"closeTabs",value:(n=oe(re().mark((function t(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.tabs.remove(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"createTab",value:(r=oe(re().mark((function t(e){var r,n=arguments;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(n.length>1&&void 0!==n[1])||n[1],t.abrupt("return",new Promise((function(t){chrome.tabs.create({url:e,active:r},(function(e){t(e)}))})));case 2:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"restoreTabs",value:(e=oe(re().mark((function t(e){var r,n,o,a,i;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=0;case 3:if(!(n<e.length)){t.next=13;break}return o=e[n],a=0===n,t.next=8,this.createTab(o.url,a);case 8:i=t.sent,r.push(i);case 10:n++,t.next=3;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isTabPinned",value:(t=oe(re().mark((function t(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.tabs.get(e,(function(e){t(e.pinned||!1)}))})));case 1:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})},{key:"formatTabForDisplay",value:function(t){var e="";try{e=new URL(t.url).hostname}catch(r){e=t.url}return te(te({},t),{},{domain:e,shortTitle:this.truncateString(t.title,50)})}},{key:"truncateString",value:function(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}}]);var t,e,r,n,o,a,i}();const ue=ce;function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function le(){le=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",v="completed",y={};function m(){}function b(){}function g(){}var _={};s(_,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,i)&&(_=x);var k=g.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==se(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(se(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function fe(t){return function(t){if(Array.isArray(t))return we(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_e(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function he(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function de(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){he(a,n,o,i,c,"next",t)}function c(t){he(a,n,o,i,c,"throw",t)}i(void 0)}))}}function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ve.apply(null,arguments)}function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){be(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function be(t,e,r){return(e=function(t){var e=function(t){if("object"!=se(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==se(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||_e(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){if(t){if("string"==typeof t)return we(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(t,e):void 0}}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xe(t){var e=t.group,r=t.onRestore,n=t.onDelete,o=t.onRestoreTab,a=t.onReorderTabs,i=t.onUpdateGroup,c=t.onUpdateTab,u=t.dragHandleProps,s=ge(tt(!1),2),l=s[0],f=s[1],p=ge(tt(null),2),h=p[0],d=p[1],v=ge(tt(null),2),y=v[0],m=v[1],g=ge(tt(!1),2),_=g[0],w=g[1],x=ge(tt(e.name),2),k=x[0],E=x[1],S=ge(tt(null),2),O=S[0],L=S[1],T=ge(tt(null),2),P=T[0],N=T[1],j=ge(tt(""),2),A=j[0],C=j[1];et((function(){i(e.id,_||null!==O?{isEditing:!0}:{isEditing:!1},!1)}),[_,O]);var I,F=function(){d(null),m(null)};return b("div",ve({className:"tab-group"},u||{}),b("div",{className:"tab-group-header",draggable:!_,onClick:function(t){"BUTTON"===t.target.tagName||"INPUT"===t.target.tagName||_||f(!l)}},b("div",{className:"tab-group-info"},_?b("form",{className:"edit-group-name-form",onSubmit:function(t){t.preventDefault(),k.trim()&&(i(e.id,{name:k.trim()}),w(!1))}},b("input",{type:"text",className:"form-control edit-group-name-input",value:k,onChange:function(t){return E(t.target.value)},autoFocus:!0,onBlur:function(){k.trim()?i(e.id,{name:k.trim()}):E(e.name),w(!1)},onClick:function(t){return t.stopPropagation()}})):b("div",{className:"group-name-container"},b("h3",{className:"tab-group-name"},e.name,b("button",{className:"btn-icon edit-icon",onClick:function(t){t.stopPropagation(),w(!0)},title:"Edit group name"},"✎"))),b("div",{className:"tab-group-meta"},b("span",{className:"tab-group-date"},(I=e.created)?new Date(I).toLocaleString():""),b("span",{className:"tab-group-count"},e.tabCount," tab",1!==e.tabCount&&"s"))),b("div",{className:"tab-group-actions"},b("button",{className:"btn btn-sm btn-primary",onClick:function(){return r(e.id)},title:"Restore all tabs"},"Restore All"),b("button",{className:"btn btn-sm btn-secondary",onClick:function(t){t.stopPropagation(),f(!l)},title:l?"Collapse":"Expand"},l?"Collapse":"Expand"),b("button",{className:"btn btn-sm btn-danger",onClick:function(){return n(e.id)},title:"Delete group"},"Delete"))),l&&e.tabs&&b("div",{className:"tab-list"},e.tabs.map((function(t,r){return b("div",{key:r,className:"tab-item ".concat(h===r?"tab-dragging":""," ").concat(y===r?"tab-drag-over":""),draggable:null===O,onDragStart:function(){return function(t){_||null!==O||d(t)}(r)},onDragOver:function(t){return function(t,e){t.preventDefault(),null!==h&&h!==e&&m(e)}(t,r)},onDrop:function(t){return function(t,r){t.preventDefault(),null!==h&&h!==r&&(a(e.id,h,r),d(null),m(null))}(t,r)},onDragEnd:F},b("div",{className:"tab-favicon"},t.favIconUrl?b("img",{src:t.favIconUrl,alt:"",width:"16",height:"16"}):b("div",{className:"default-favicon"})),b("div",{className:"tab-info"},O===r&&"title"===P?b("form",{className:"edit-tab-form",onSubmit:function(n){if(n.preventDefault(),A.trim()){var o=me(me({},t),{},{title:A.trim()});c(e.id,r,o)}L(null),N(null)},onClick:function(t){return t.stopPropagation()}},b("input",{type:"text",className:"form-control edit-tab-input",value:A,onChange:function(t){return C(t.target.value)},autoFocus:!0,onBlur:function(){if(A.trim()){var n=me(me({},t),{},{title:A.trim()});c(e.id,r,n)}L(null),N(null)}})):b("div",{className:"tab-title",title:t.title,onClick:function(e){"BUTTON"!==e.target.tagName&&(e.stopPropagation(),L(r),N("title"),C(t.title||""))}},t.title||"Untitled Tab",b("button",{className:"btn-icon edit-icon",onClick:function(e){e.stopPropagation(),L(r),N("title"),C(t.title||"")},title:"Edit tab title"},"✎")),O===r&&"url"===P?b("form",{className:"edit-tab-form",onSubmit:function(n){if(n.preventDefault(),A.trim())try{new URL(A);var o=me(me({},t),{},{url:A.trim()});c(e.id,r,o)}catch(o){var a="http://".concat(A.trim());try{new URL(a);var i=me(me({},t),{},{url:a});c(e.id,r,i)}catch(n){return void alert("Please enter a valid URL")}}L(null),N(null)},onClick:function(t){return t.stopPropagation()}},b("input",{type:"text",className:"form-control edit-tab-input",value:A,onChange:function(t){return C(t.target.value)},autoFocus:!0,onBlur:function(){if(A.trim())try{new URL(A);var n=me(me({},t),{},{url:A.trim()});c(e.id,r,n)}catch(n){var o="http://".concat(A.trim());try{new URL(o);var a=me(me({},t),{},{url:o});c(e.id,r,a)}catch(t){}}L(null),N(null)}})):b("div",{className:"tab-url",title:t.url,onClick:function(e){"BUTTON"!==e.target.tagName&&(e.stopPropagation(),L(r),N("url"),C(t.url||""))}},t.url,b("button",{className:"btn-icon edit-icon",onClick:function(e){e.stopPropagation(),L(r),N("url"),C(t.url||"")},title:"Edit tab URL"},"✎"))),b("button",{className:"btn btn-sm btn-link",onClick:function(){return o(t)},title:"Restore this tab"},"Restore"))}))))}function ke(t){var e=t.onSearch,r=ge(tt(""),2),n=r[0],o=r[1];return b("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),e(n)}},b("input",{type:"text",className:"search-input",placeholder:"Search saved tabs...",value:n,onChange:function(t){return o(t.target.value)}}),b("button",{type:"submit",className:"btn btn-primary search-button"},"Search"))}function Ee(t){var e=t.onImport,r=ge(tt(""),2),n=r[0],o=r[1],a=ge(tt(""),2),i=a[0],c=a[1],u=ge(tt(""),2),s=u[0],l=u[1],f=ge(tt(null),2),p=(f[0],f[1],ge(tt(null),2)),h=p[0],d=p[1],v=new Qt,y=new Bt,m=(K=5,function(t,e){var r=Z(B++,7);return ct(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}((function(){return{current:null}}),[])),g=function(t,e){d({message:t,actions:e}),e||setTimeout((function(){_()}),1e4)},_=function(){var t=document.querySelector(".toast");t?(t.classList.add("hiding"),setTimeout((function(){d(null)}),300)):d(null)},w=function(){var t=de(le().mark((function t(e){var r,o,a,i,c,u,s,l,f,p,h,d,m,b;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.getAllTabGroups();case 3:if(0!==(r=t.sent).length){t.next=7;break}return g("No tab groups to export"),t.abrupt("return");case 7:if(o="",a="","onetab"!==e){t.next=34;break}i=[],c=pe(r),t.prev=12,c.s();case 14:if((u=c.n()).done){t.next=22;break}return s=u.value,t.next=18,y.getTabGroup(s.id);case 18:(l=t.sent)&&l.tabs&&i.push.apply(i,fe(l.tabs));case 20:t.next=14;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(12),c.e(t.t0);case 27:return t.prev=27,c.f(),t.finish(27);case 30:o=v.exportAsOneTabFormat(i),a="tablocker-onetab-".concat(Date.now(),".txt"),t.next=61;break;case 34:if("encrypted"!==e){t.next=61;break}f=[],p=pe(r),t.prev=37,p.s();case 39:if((h=p.n()).done){t.next=47;break}return d=h.value,t.next=43,y.getTabGroup(d.id);case 43:(m=t.sent)&&f.push(m);case 45:t.next=39;break;case 47:t.next=52;break;case 49:t.prev=49,t.t1=t.catch(37),p.e(t.t1);case 52:return t.prev=52,p.f(),t.finish(52);case 55:return b={groups:f,version:"1.0",exportDate:Date.now()},n&&v.setPassword(n),t.next=59,v.exportEncrypted(b,n);case 59:o=t.sent,a="tablocker-encrypted-".concat(Date.now(),".tlbk");case 61:if(o){t.next=63;break}return t.abrupt("return");case 63:g("Choose how to export your tabs:",[{label:"Save to File",onClick:function(){v.downloadAsFile(o,a),g("Export saved to file successfully!")},primary:!0},{label:"Copy to Clipboard",onClick:function(){var t=de(le().mark((function t(){var e;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.copyToClipboard(o);case 2:e=t.sent,g(e?"Export copied to clipboard!":"Failed to copy to clipboard");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t.next=70;break;case 66:t.prev=66,t.t2=t.catch(0),console.error("Export error:",t.t2),g("Export failed: ".concat(t.t2.message));case 70:case"end":return t.stop()}}),t,null,[[0,66],[12,24,27,30],[37,49,52,55]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=de(le().mark((function t(){var r;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s.trim()){t.next=4;break}return g("Please enter import data"),t.abrupt("return");case 4:return i&&v.setPassword(i),t.next=7,v.autoImport(s,i);case 7:"tablocker"===(r=t.sent).type?(g("TabLocker import successful!"),e(r.data)):"onetab"===r.type&&(g("OneTab import successful!"),e(r.data)),l(""),c(""),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Import error:",t.t0),g("Import failed: ".concat(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=de(le().mark((function t(r){var n,o;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=r.target.files[0]){t.next=4;break}return t.abrupt("return");case 4:(o=new FileReader).onload=function(){var t=de(le().mark((function t(r){var n,o;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=r.target.result,l(n),!n){t.next=11;break}return i&&v.setPassword(i),t.next=7,v.autoImport(n,i);case 7:"tablocker"===(o=t.sent).type?(g("TabLocker import successful!"),e(o.data)):"onetab"===o.type&&(g("OneTab import successful!"),e(o.data)),l(""),c("");case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("File import error:",t.t0),g("File import failed: ".concat(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),o.onerror=function(){g("Error reading file")},o.readAsText(n),r.target.value="",t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("File import error:",t.t0),g("File import failed: ".concat(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();return b("div",{className:"export-import-container"},h&&b("div",{className:"toast"},b("div",{className:"toast-message"},h.message),h.actions&&b("div",{className:"toast-actions"},h.actions.map((function(t,e){return b("button",{key:e,className:"btn ".concat(t.primary?"btn-primary":"btn-secondary"),onClick:function(){t.onClick(),_()}},t.label)})))),b("div",{className:"card"},b("div",{className:"card-header"},b("h3",null,"Export Tabs")),b("div",{className:"card-body"},b("div",{className:"form-group"},b("label",{htmlFor:"exportPassword"},"Encryption Password (optional):"),b("input",{type:"password",id:"exportPassword",className:"form-control",value:n,onChange:function(t){return o(t.target.value)},placeholder:"Leave empty for OneTab format"})),b("div",{className:"export-buttons"},b("button",{className:"btn btn-primary",onClick:function(){return w("encrypted")},title:"Export as encrypted TabLocker format (download or copy)"},"Export Encrypted"),b("button",{className:"btn btn-secondary",onClick:function(){return w("onetab")},title:"Export in OneTab compatible format (download or copy)"},"Export OneTab Compatible")))),b("div",{className:"card"},b("div",{className:"card-header"},b("h3",null,"Import Tabs")),b("div",{className:"card-body"},b("div",{className:"form-group"},b("label",{htmlFor:"importText"},"Paste exported data:"),b("textarea",{id:"importText",className:"form-control",value:s,onChange:function(t){return l(t.target.value)},placeholder:"Paste OneTab or TabLocker exported data here",rows:5})),b("div",{className:"form-group"},b("label",{htmlFor:"importPassword"},"Decryption Password (if needed):"),b("input",{type:"password",id:"importPassword",className:"form-control",value:i,onChange:function(t){return c(t.target.value)},placeholder:"Only needed for encrypted exports"})),b("div",{className:"import-buttons"},b("button",{className:"btn btn-primary",onClick:x,title:"Import from pasted text"},"Import"),b("button",{className:"btn btn-secondary",onClick:function(){m.current&&m.current.click()},title:"Import from file"},"Import from File"),b("input",{ref:m,type:"file",accept:".txt,.tlbk,text/plain",onChange:k,style:{display:"none"}})))))}function Se(t){var e=t.settings,r=t.onSaveSettings,n=ge(tt(e),2),o=n[0],a=n[1],i=ge(tt(!1),2),c=i[0],u=i[1];et((function(){a(e)}),[e]);var s=function(t){var e=t.target,r=e.name,n=e.value,i=e.type,c=e.checked;a(me(me({},o),{},be({},r,"checkbox"===i?c:n)))};return b("div",{className:"settings-container"},b("form",{onSubmit:function(t){t.preventDefault(),r(o)}},b("div",{className:"card"},b("div",{className:"card-header"},b("h3",null,"General Settings")),b("div",{className:"card-body"},b("div",{className:"form-group checkbox"},b("input",{type:"checkbox",id:"closeTabsAfterSave",name:"closeTabsAfterSave",checked:o.closeTabsAfterSave,onChange:s}),b("label",{htmlFor:"closeTabsAfterSave"},"Close tabs after saving")),b("div",{className:"form-group"},b("label",{htmlFor:"password"},"Encryption Password:"),b("div",{className:"password-input-container"},b("input",{type:c?"text":"password",id:"password",name:"password",className:"form-control",value:o.password||"",onChange:s,placeholder:"Enter encryption password"}),b("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:function(){return u(!c)}},c?"Hide":"Show")),b("small",null,"This password will be used to encrypt your data. If you forget it, you will not be able to recover your saved tabs.")),b("div",{className:"form-group checkbox"},b("input",{type:"checkbox",id:"usePinProtection",name:"usePinProtection",checked:o.usePinProtection,onChange:s}),b("label",{htmlFor:"usePinProtection"},"Enable PIN protection for quick access")),o.usePinProtection&&b("div",{className:"form-group"},b("label",{htmlFor:"pin"},"PIN:"),b("input",{type:"password",id:"pin",name:"pin",className:"form-control",value:o.pin||"",onChange:s,placeholder:"Enter a 4-digit PIN",pattern:"[0-9]{4}",maxLength:4}),b("small",null,"This PIN will be used for quick access to your saved tabs.")),b("div",{className:"form-group checkbox"},b("input",{type:"checkbox",id:"autoBackup",name:"autoBackup",checked:o.autoBackup,onChange:s}),b("label",{htmlFor:"autoBackup"},"Automatically back up tab data weekly")),b("button",{type:"submit",className:"btn btn-primary"},"Save Settings")))))}!function(r,n,o){var a,i,c,u;n==document&&(n=document.documentElement),e.__&&e.__(r,n),i=(a="function"==typeof o)?null:o&&o.__k||n.__k,c=[],u=[],C(n,r=(!a&&o||n).__k=b(_,null,[r]),i||p,p,n.namespaceURI,!a&&o?[o]:i?null:n.firstChild?t.call(n.childNodes):null,c,!a&&o?o:i?i.__e:n.firstChild,a,u),I(c,r,u)}(b((function(){var t=ge(tt("tabs"),2),e=t[0],r=t[1],n=ge(tt([]),2),o=n[0],a=n[1],i=ge(tt(!0),2),c=i[0],u=i[1],s=ge(tt(""),2),l=s[0],f=s[1],p=ge(tt(null),2),h=p[0],d=p[1],v=ge(tt(null),2),y=v[0],m=v[1],g=ge(tt({closeTabsAfterSave:!1,usePinProtection:!1,pin:"",autoBackup:!0,password:""}),2),_=g[0],w=g[1],x=ge(tt(null),2),k=x[0],E=x[1],S=new Bt;function O(){return L.apply(this,arguments)}function L(){return(L=de(le().mark((function t(){var e,r,n,o,i,c;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!l){t.next=7;break}return t.next=4,S.searchTabGroups(l);case 4:e=t.sent,t.next=10;break;case 7:return t.next=9,S.getAllTabGroups();case 9:e=t.sent;case 10:r=[],n=pe(e),t.prev=12,n.s();case 14:if((o=n.n()).done){t.next=28;break}return i=o.value,t.prev=16,t.next=19,S.getTabGroup(i.id);case 19:(c=t.sent)&&(c.tabCount=c.tabs?c.tabs.length:0,r.push(c)),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(16),console.error("Error loading group ".concat(i.id,":"),t.t0);case 26:t.next=14;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(12),n.e(t.t1);case 33:return t.prev=33,n.f(),t.finish(33);case 36:a(r),t.next=43;break;case 39:throw t.prev=39,t.t2=t.catch(0),console.error("Error loading tab groups:",t.t2),t.t2;case 43:case"end":return t.stop()}}),t,null,[[0,39],[12,30,33,36],[16,23]])})))).apply(this,arguments)}function T(){return P.apply(this,arguments)}function P(){return(P=de(le().mark((function t(){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,chrome.runtime.sendMessage({action:"getOptions"},(function(t){t&&t.success&&t.options&&w(t.options)})),t.next=8;break;case 4:throw t.prev=4,t.t0=t.catch(0),console.error("Error loading settings:",t.t0),t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})))).apply(this,arguments)}new ue,et((function(){function t(){return(t=de(le().mark((function t(){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O();case 3:return t.next=5,T();case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error loading data:",t.t0),E({type:"error",text:"Error loading data"});case 11:return t.prev=11,u(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,7,11,14]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var N=function(){var t=de(le().mark((function t(e){var r;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=o.find((function(t){return t.id===e})),r&&r.tabs){t.next=5;break}return E({type:"error",text:"Tab group not found or empty"}),t.abrupt("return");case 5:chrome.runtime.sendMessage({action:"restoreTabs",data:{tabs:r.tabs,keepSaved:!0}},(function(t){t&&t.success?(E({type:"success",text:"Restored ".concat(t.count," tabs!")}),setTimeout((function(){return E(null)}),3e3)):E({type:"error",text:(null==t?void 0:t.error)||"Error restoring tabs"})})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error restoring tab group:",t.t0),E({type:"error",text:"Error restoring tabs: ".concat(t.t0.message)});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=de(le().mark((function t(e){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{chrome.runtime.sendMessage({action:"restoreTabs",data:{tabs:[e],keepSaved:!0}},(function(t){t&&t.success?(E({type:"success",text:"Tab restored!"}),setTimeout((function(){return E(null)}),2e3)):E({type:"error",text:(null==t?void 0:t.error)||"Error restoring tab"})}))}catch(t){console.error("Error restoring tab:",t),E({type:"error",text:"Error restoring tab: ".concat(t.message)})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=de(le().mark((function t(e){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,confirm("Are you sure you want to delete this tab group?")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,S.deleteTabGroup(e);case 5:return t.next=7,O();case 7:E({type:"success",text:"Tab group deleted!"}),setTimeout((function(){return E(null)}),2e3),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("Error deleting tab group:",t.t0),E({type:"error",text:"Error deleting tab group: ".concat(t.t0.message)});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=de(le().mark((function t(e,r){var n,i,c,u=arguments;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(u.length>2&&void 0!==u[2])||u[2],t.prev=1,i=o.findIndex((function(t){return t.id===e})),-1!==i){t.next=5;break}return t.abrupt("return");case 5:if((c=fe(o))[i]=me(me({},c[i]),r),a(c),!n){t.next=11;break}return t.next=11,S.updateTabGroup(e,r);case 11:E({type:"success",text:"Group updated!"}),setTimeout((function(){return E(null)}),2e3),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.error("Error updating group:",t.t0),E({type:"error",text:"Error updating group: ".concat(t.t0.message)});case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,r){return t.apply(this,arguments)}}(),I=function(){var t=de(le().mark((function t(e,r,n){var i,c,u,s,l;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=o.findIndex((function(t){return t.id===e})),-1!==i){t.next=4;break}return t.abrupt("return");case 4:return c=o[i],(u=fe(c.tabs))[r]=n,s=me(me({},c),{},{tabs:u}),(l=fe(o))[i]=s,a(l),t.next=13,S.updateTabGroup(e,{tabs:u});case 13:E({type:"success",text:"Tab updated!"}),setTimeout((function(){return E(null)}),2e3),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.error("Error updating tab:",t.t0),E({type:"error",text:"Error updating tab: ".concat(t.t0.message)});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,r,n){return t.apply(this,arguments)}}(),F=function(){var t=de(le().mark((function t(e,r,n){var i,c,u,s,l,f,p,h;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=o.findIndex((function(t){return t.id===e})),-1!==i){t.next=4;break}return t.abrupt("return");case 4:return c=o[i],u=fe(c.tabs),s=u.splice(r,1),l=ge(s,1),f=l[0],u.splice(n,0,f),p=me(me({},c),{},{tabs:u}),(h=fe(o))[i]=p,a(h),t.next=14,S.updateTabGroup(e,{tabs:u});case 14:E({type:"success",text:"Tab order updated!"}),setTimeout((function(){return E(null)}),2e3),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error("Error reordering tabs:",t.t0),E({type:"error",text:"Error updating tab order: ".concat(t.t0.message)});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,r,n){return t.apply(this,arguments)}}(),G=function(){var t=de(le().mark((function t(e,r){var n,i,c,u,s;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),null===h||h===r){t.next=28;break}t.prev=2,n=fe(o),i=n.splice(h,1),c=ge(i,1),u=c[0],n.splice(r,0,u),a(n),s=0;case 8:if(!(s<n.length)){t.next=14;break}return t.next=11,S.updateTabGroup(n[s].id,{orderIndex:s});case 11:s++,t.next=8;break;case 14:E({type:"success",text:"Group order updated!"}),setTimeout((function(){return E(null)}),2e3),t.next=24;break;case 18:return t.prev=18,t.t0=t.catch(2),console.error("Error reordering groups:",t.t0),E({type:"error",text:"Error updating group order: ".concat(t.t0.message)}),t.next=24,O();case 24:return t.prev=24,d(null),m(null),t.finish(24);case 28:case"end":return t.stop()}}),t,null,[[2,18,24,28]])})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){d(null),m(null)},U=function(){var t=de(le().mark((function t(e){var r,n,o;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.groups){t.next=21;break}r=pe(e.groups),t.prev=3,r.s();case 5:if((n=r.n()).done){t.next=11;break}return o=n.value,t.next=9,S.saveTabGroup(o);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:t.next=24;break;case 21:if(!e.tabs){t.next=24;break}return t.next=24,S.saveTabGroup(e);case 24:return t.next=26,O();case 26:t.next=32;break;case 28:t.prev=28,t.t1=t.catch(0),console.error("Error processing import:",t.t1),E({type:"error",text:"Error processing import: ".concat(t.t1.message)});case 32:case"end":return t.stop()}}),t,null,[[0,28],[3,13,16,19]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=de(le().mark((function t(e){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{chrome.runtime.sendMessage({action:"setOptions",options:e},(function(t){t&&t.success?(w(e),E({type:"success",text:"Settings saved!"}),setTimeout((function(){return E(null)}),2e3)):E({type:"error",text:(null==t?void 0:t.error)||"Error saving settings"})}))}catch(t){console.error("Error saving settings:",t),E({type:"error",text:"Error saving settings: ".concat(t.message)})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return b("div",{className:"options-container"},b("header",{className:"app-header"},b("h1",null,"TabLocker"),b("div",{className:"app-subtitle"},"Secure Tab Management")),b("nav",{className:"app-nav"},b("ul",{className:"nav-tabs"},b("li",{className:"tabs"===e?"active":"",onClick:function(){return r("tabs")}},"Saved Tabs"),b("li",{className:"export-import"===e?"active":"",onClick:function(){return r("export-import")}},"Export/Import"),b("li",{className:"settings"===e?"active":"",onClick:function(){return r("settings")}},"Settings"))),b("main",{className:"app-content"},k&&b("div",{className:"message message-".concat(k.type)},k.text),"tabs"===e&&b("div",{className:"tabs-container"},b(ke,{onSearch:function(t){f(t),u(!0),O().finally((function(){u(!1)}))}}),c?b("div",{className:"loading"},"Loading..."):0===o.length?b("div",{className:"empty-state"},b("p",null,"No saved tabs found."),l&&b("p",null,"Try a different search query.")):b("div",{className:"tab-groups-list"},o.map((function(t,e){return b("div",{key:t.id,className:"group-container ".concat(h===e?"group-dragging":""," ").concat(y===e?"group-drag-over":""),draggable:o.every((function(t){return!t.isEditing})),onDragStart:function(){return function(t){o.some((function(t){return t.isEditing}))||d(t)}(e)},onDragOver:function(t){return function(t,e){t.preventDefault(),null!==h&&h!==e&&m(e)}(t,e)},onDrop:function(t){return G(t,e)},onDragEnd:D},b(xe,{key:t.id,group:t,onRestore:N,onDelete:A,onRestoreTab:j,onReorderTabs:F,onUpdateGroup:C,onUpdateTab:I}))})))),"export-import"===e&&b(Ee,{onImport:U}),"settings"===e&&b(Se,{settings:_,onSaveSettings:R})),b("footer",{className:"app-footer"},b("div",{className:"footer-info"},b("span",null,"TabLocker"),b("span",{className:"separator"},"|"),b("span",{className:"privacy-note"},"100% Private & Encrypted"),b("span",{className:"separator"},"|"),b("a",{href:"https://github.com/your-username/tablocker",target:"_blank",rel:"noopener noreferrer"},"GitHub"))))}),null),document.getElementById("app"))})()})();